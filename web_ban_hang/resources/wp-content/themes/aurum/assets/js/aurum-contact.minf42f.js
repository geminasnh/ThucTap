var map;!function(e,a,n){"use strict";a.aurumInitializeMap=function(){var n=new google.maps.LatLngBounds,o={zoom:10,center:new google.maps.LatLng(0,0),mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:!1};e.each(mapChords,(function(e,a){var o=a.map_point,t=new google.maps.LatLng(o.lat,o.lng);n.extend(t)})),o.center=n.getCenter(),map=new google.maps.Map(document.getElementById("map"),o),"mapStyle"in a&&map.setOptions({styles:mapStyle}),e.each(mapChords,(function(e,a){setTimeout((function(){var e=a.pin_image?a.pin_image:"";if(a.is_retina&&a.pin_image){var e=new google.maps.MarkerImage(a.pin_image,null,null,null,new google.maps.Size(a.size[0]/2,a.size[1]/2)),n=new google.maps.Marker({position:new google.maps.LatLng(a.map_point.lat,a.map_point.lng),map:map,flat:!0,icon:e});e=""}else new google.maps.Marker({position:new google.maps.LatLng(a.map_point.lat,a.map_point.lng),map:map,animation:google.maps.Animation.DROP,icon:e})}),250*e)}));var t=[];e.each(mapChords,(function(e,a){""!==a.zoom_level&&t.push(parseInt(a.zoom_level,10))})),t.length?map.setZoom(t.reduce((function(e,a){return e+a}))/t.length):map.fitBounds(n)},e(document).ready((function(){e("#contact-form").on("submit",(function(a){a.preventDefault();var n=e(this);if(n.data("is-busy"))return!1;var o=e(this).serializeArray(),t=n.find('input[name="name"]'),i=n.find('input[name="subject"]'),s=n.find('input[name="email"]'),r=n.find('input[name="phone"]'),l=n.find('textarea[name="message"]'),p=[];if(n.find(".required").each((function(a,n){var o=e(n);o.removeClass("has-errors"),"email"==o.prop("type")?0!=o.val().trim().length&&/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.val())||p.push(o):0==o.val().trim().length&&p.push(o)})),p.length>0)e.each(p,(function(a,n){var o=e(n);0==a&&o.focus(),o.addClass("has-errors")}));else{var m=n.find('input[name="privacy_policy"]');if(m.length&&!m.is(":checked"))return m.closest(".privacy-policy").addClass("has-errors"),void alert(m.data("required-text"));m.closest(".privacy-policy").removeClass("has-errors"),n.data("is-busy",!0);var u=n.find(".send-message");u.fadeTo(250,.25),e.post(ajaxurl,{action:"lab_req_contact_token",form_data:{name:t.val(),subject:i.val(),email:s.val(),phone:r.val(),message:l.val()}},(function(a){var t=a.split("_"),i={name:t[0],value:t[1]},s={name:"action",value:"lab_contact_form"};o.push(i),o.push(s),e.post(ajaxurl,o,(function(a){!1===a.errors?(n.find("input, textarea").prop("readonly",!0).fadeTo(250,.5),e(".form-success-message").removeClass("hidden").hide().slideDown(),u.fadeTo(250,0)):(n.data("is-busy",!1),alert("An error occured during the verification of the token! Please try again"),u.fadeTo(250,1))}),"json")}))}}))}))}(jQuery,window);